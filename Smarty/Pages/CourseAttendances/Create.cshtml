@page
@model CreateModel
@{
}


<div class="container-fluid">

    <div class="row">
        <div class="col-lg-12 clear-padding-xs">
            <h5 class="page-title"><i class="fa fa-user-secret"></i> CREATE COURSE ATTENDANCE</h5>
            <div class="section-divider"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 clear-padding-xs">
            <div class="col-md-12">
                <div class="dash-item first-dash-item">
                    <h6 class="item-title"><i class="fa fa-user"></i>COURSE ATTENDANCE INFO</h6>
                    <form  method="post" >
                        <div class="inner-item">
                            <div asp-validation-summary="ModelOnly" class="Dash-form text-danger"></div>
                            <input asp-for="ViewModel.Latitude" type="hidden" />
                            <input asp-for="ViewModel.Longitude" type="hidden" />
                            <div class="dash-form">
                                <div class="col-sm-3">
                                    <label asp-for="ViewModel.CourseId" class="clear-top-margin"><i class="fa fa-calendar"></i>Course</label>
                                    <select asp-for="ViewModel.CourseId" asp-items="Model.SelectList">
                                        <option value="">Select Course</option>
                                    </select>
                                    <span asp-validation-for="ViewModel.CourseId" class="text-danger"></span>
                                </div>
                                <div class="col-sm-3">
                                    <label asp-for="ViewModel.DateTime" class="clear-top-margin"><i class="fa fa-book"></i>Date</label>
                                    <input type="date" asp-for="ViewModel.DateTime" />
                                    <span asp-validation-for="ViewModel.DateTime" class="text-danger"></span>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-sm-12">
                                    <button id="submit" type="submit">CREATE</button>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </form>
                    <button id="hamo">CREATE</button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<partial name="_ValidationScriptsPartial" />
<script>

    const successCallBack = (position) => {
        $("#ViewModel_Latitude").val(position.coords.latitude);
        $("#ViewModel_Longitude").val(position.coords.longitude);
        //$('form').submit();
    };
    const errorCallBack = (error) => {
        if(error.code === 1)
        {
            toastr.error('Please Enable access to location to enable QRcode Attendance feature');
        }
        else if(error.code === 2)
        {
            toastr.error('Location information is not supported by this browser, QRCode Attendance feature will not work !');
        }
        else if(error.code === 3)
        {
            toastr.error('timeout! faild to get Location information, please try again');
        }
        else
        {
            toastr.error('An unknown error occurred, QRCode Attendance feature will not work !');
        }

    };
    navigator.geolocation.getCurrentPosition(successCallBack , errorCallBack);
    
</script>

}
